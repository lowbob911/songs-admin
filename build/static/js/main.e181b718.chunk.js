(this["webpackJsonpsongs-admin"]=this["webpackJsonpsongs-admin"]||[]).push([[0],{111:function(e,t,c){},112:function(e,t,c){},211:function(e,t,c){"use strict";c.r(t);var n=c(4),a=c.n(n),r=c(63),i=c.n(r),s=(c(111),c(11)),l=(c(112),c(41)),o=c(16),d=c(12),j=c(53),b=c(30),u=c(3);function h(e){var t=e.songs,c=e.onSelect;return Object(u.jsxs)("table",{className:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"#"}),Object(u.jsx)("th",{scope:"col",children:"Name"}),Object(u.jsx)("th",{scope:"col",children:"Action"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:e.number}),Object(u.jsx)("td",{children:e.title}),Object(u.jsx)("td",{children:Object(u.jsx)(b.a,{variant:"primary",onClick:function(){return c(e)},children:"Select"})})]},e.key)}))})]})}var O="NEW",f="UPDATE",m="div {margin: 30px 20px; text-align: center; white-space: pre-wrap;} ".concat("span.chunk { position: relative; display: inline-flex; flex-direction: column; vertical-align: bottom; } span.chunk:before { font-size: 0.6em; content: attr(data-chord); position: relative; vertical-align: bottom;");function v(e){var t=Object(n.useState)([]),c=Object(s.a)(t,2),a=c[0],r=c[1],i=Object(n.useState)(null),v=Object(s.a)(i,2),x=v[0],p=v[1],g=Object(n.useState)(null),y=Object(s.a)(g,2),k=y[0],S=y[1],N=Object(n.useState)(""),C=Object(s.a)(N,2),w=C[0],E=C[1],I=Object(n.useState)(""),T=Object(s.a)(I,2),D=T[0],F=T[1],A=Object(n.useState)(""),M=Object(s.a)(A,2),U=M[0],z=M[1],B=Object(n.useState)({}),J=Object(s.a)(B,2),W=J[0],q=J[1];function L(e){e.title=w,e.text=D,e.updated=Date.now()}function P(){var e={};return w||(e.title=!0),D||(e.text=!0),e}return Object(n.useEffect)((function(){var t=Object(d.e)(e.db,"songs");Object(d.b)(t,(function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.val()),{},{key:e.key}))})),r(t)}))}),[]),Object(n.useEffect)((function(){var e="";U&&(e=U.getCurrentContent().getPlainText().replace(/{.*?{!}/g,(function(e){return'<span class="chunk" data-chord="'.concat(e.match(/{([^!]*?(?=}))/)[1],'">').concat(e.match(/}(.*?(?={!}))/)[1],"</span>")}))),F(e)}),[U]),Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-12 col-lg-4",children:Object(u.jsxs)("div",{className:"card",children:[Object(u.jsxs)("h5",{className:"card-header",children:["Songs List",Object(u.jsx)(b.a,{className:"float-end",variant:"success",onClick:function(){S(O),E(""),z(j.EditorState.createWithText("")),p(null)},children:"Create"})]}),Object(u.jsx)("div",{className:"card-body",children:Object(u.jsx)(h,{songs:a,onSelect:function(e){S(f),p(e.key),E(e.title);var t=e.text.replace(/<span class="chunk".*?<\/span>/g,(function(e){return"{".concat(e.match(/data-chord="(.*?(?="))/)[1],"}").concat(e.match(/<span class="chunk".*>(.*?(?=<))/)[1],"{!}")}));z(j.EditorState.createWithText(t))}})})]})}),Object(u.jsx)("div",{className:"col-12 col-lg-4",children:(k===O||k===f&&x)&&Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("h5",{className:"card-header",children:k===O?"Create Song":"Update Song "+w}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:"titleInput",className:"form-label",children:"Title:"}),Object(u.jsx)("input",{type:"text",className:"form-control ".concat(W.title&&"is-invalid"),id:"titleInput",placeholder:"Song Title",value:w,onChange:function(e){return E(e.target.value)}}),Object(u.jsx)("div",{id:"validationServer05Feedback",className:"invalid-feedback",children:"Should not be empty"})]}),Object(u.jsxs)("div",{children:["Text:",Object(u.jsx)("div",{className:"".concat(W.text&&"is-invalid"),children:Object(u.jsx)(j.Editor,{editorState:U,onChange:z,className:"test"})}),Object(u.jsx)("div",{id:"validationServer05Feedback",className:"invalid-feedback",children:"Should not be empty"})]}),Object(u.jsxs)("div",{className:"mt-1 text-center",children:[k===f&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.a,{variant:"primary",className:"me-2",onClick:function(){return function(){if(x){var t=P();if(q(t),Object.keys(t).length>0)return;var c=Object(o.a)({},a.find((function(e){return e&&e.key===x})));L(c),Object(d.g)(Object(d.e)(e.db,"songs/"+x),c).then((function(){alert("Updated")}))}}()},children:"Update"}),Object(u.jsx)(b.a,{variant:"danger",onClick:function(){return function(t){if(window.confirm("Are you sure want to delete Song?")){var c=Object(o.a)({},a.find((function(e){return e.key===t})));Object(d.f)(Object(d.e)(e.db,"songs/"+t)).then((function(){alert("deleted!"),p(null),E(""),z("");var t=Object(d.e)(e.db,"songs"),n=Object(d.d)(t,Object(d.c)("number"),Object(d.h)(c.number+1)),a=[];Object(d.b)(n,(function(e){e.forEach((function(e){a.push({key:e.key,val:e.val()})}))})),a.forEach((function(t){var c=t.val;c.number=c.number-1,c.updated=Date.now(),Object(d.g)(Object(d.e)(e.db,"songs/"+t.key),c)}))}))}}(x)},children:"Delete"})]}),k===O&&Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(b.a,{variant:"primary",onClick:function(){return function(){if(k===O){var t=P();if(q(t),Object.keys(t).length>0)return;var c={number:(a.length>0?Math.max.apply(Math,Object(l.a)(a.filter((function(e){return e.number})).map((function(e){return e.number})))):0)+1};L(c);var n=(a.length>0?Math.max.apply(Math,Object(l.a)(a.filter((function(e){return e.key})).map((function(e){return e.key})))):0)+1;Object(d.g)(Object(d.e)(e.db,"songs/"+n),c).then((function(){alert("Created"),S(f),p(n)}))}}()},children:"Create"})})]})]})]})}),Object(u.jsx)("div",{className:"col-12 col-lg-4",children:(k===O||k===f&&x)&&Object(u.jsx)("iframe",{className:"w-100 h-100",srcDoc:"<style>".concat(m,"</style><div>").concat(D,"</div>")})})]})})}c(210);var x=c(106);function p(){return Object(u.jsxs)("div",{className:"lds-ring",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}var g={apiKey:"AIzaSyB6jgAYZFaJhpzVcoZ9hox6h6iVGq6Ozqo",authDomain:"songreader-f7e8c.firebaseapp.com",databaseURL:"https://songreader-f7e8c.firebaseio.com",projectId:"songreader-f7e8c",storageBucket:"songreader-f7e8c.appspot.com",messagingSenderId:"703302008821",appId:"1:703302008821:web:826c661d4e80de2a732abc"},y=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=Object(x.a)(g),t=Object(d.a)(e);a(t)}),[]),c?Object(u.jsx)(v,{db:c}):Object(u.jsx)(p,{})};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.e181b718.chunk.js.map